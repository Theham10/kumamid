<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="./view.css">
</head>

<body>

  <div class="detail-container">
    <div class="designer-header">
      <div class="designer-school-info">
        í•œêµ­ì˜ìƒëŒ€í•™êµ ì˜ìƒë””ìì¸ê³¼<br>ì œ24íšŒ 2023 ì¡¸ì—…ì „
      </div>
      <h2 class="designer-title">Designer</h2>
      <div class="designer-profile-row">
        <div class="profile-img-container">

          <img id="profileImg" src="" alt="" class="profile-img">

        </div>
        <div class="profile-text-box">
          <div id="designerName" class="profile-name"></div>
          <div id="designerInfo" class="profile-info"></div>
        </div>
      </div>
      <hr class="divider">
      <div class="designer-quote">
       
      </div>
      <hr class="divider">
      <h1>Project</h1>
      <div class="detail-project">
        <div class="detail-project-img"></div>
        <div class="detail-project-vidio"></div>
      </div>
      <div class="detail-project-tproject">
        
      </div>
    </div>
  </div>

  <div class="comment-section">
    <h3>ëŒ“ê¸€ <span style="font-size: 1rem; color: #888;">1</span></h3>
    <div class="comment-box">
      <div class="comment-avatar">ğŸ‘¤</div>
      <div class="comment-content">
        <textarea id="commentInput" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."></textarea>
        <div class="comment-options">
          <label><input type="checkbox" /> ë¹„ë°€ê¸€</label>
          <button onclick="addComment()">ë“±ë¡</button>
        </div>
      </div>
    </div>
    <div class="comment-item">
      <div class="comment-avatar">ğŸ‘¤</div>
      <div class="comment-body">
        <div class="comment-header">
          <span class="comment-author">ì„¤</span>
          <span class="comment-time">1ë…„ ì „</span>
        </div>
        <div class="comment-text">
          ì˜ìƒë“¤ì—ì„œ ë„ˆì˜ ì¬ì¹˜ê°€ ëŠê»´ì§„ë‹¤ ì¬ë°Œê²Œ ì˜ ë´¤ì˜¤ ì´ê±° ë§Œë“œëŠë¼ ì–¼ë§ˆë‚˜ ê³ ìƒí–ˆì„ê¹Œí•˜ëŠ” ìƒê°ë„ ë“¤ì–´ ìˆ˜ê³ í–ˆë‹¤! BTS ë´‰ì¤€í˜¸ ì†í¥ë¯¼ ê³½í¬ì§„ ê°€ìì•„~!~!
        </div>
      </div>
    </div>
  </div>

  <div style="max-width: 960px; margin: 0 auto; padding: 4rem 1rem;">
    <h3 style="color: #fff; font-size: 1.3rem; margin-bottom: 1.5rem;">ë‹¤ë¥¸ ë””ìì´ë„ˆ ë³´ê¸°</h3>
    <div style="display: flex; flex-wrap: nowrap; overflow-x: auto; gap: 2rem;">
      <a href="/Designer/view/425321" style="flex: 0 0 auto; text-align: center; color: #fff;">
        <img
          src="https://lh3.googleusercontent.com/wJ640HEZP5IAl18qhPcbmO13LGwKByQ0Z4PO223esW8fAh-krFPIm0fhlmNfLy_qjs_V3jX0Gy0zFvKPuDP5QlVYRs2uwCkW0bKNJPyqhjR_G__nbsmz=w600-h600-n"
          style="width: 150px; border-radius: 10px;" alt="ê³½í¬ì§„">
        <div style="margin-top: 0.5rem;">ê³½í¬ì§„</div>
      </a>
      <a href="/Designer/view/425320" style="flex: 0 0 auto; text-align: center; color: #fff;">
        <img
          src="https://lh3.googleusercontent.com/NKDBAS9QpX9n9bEhP6hUhrdnJL_doFYtes5vzi3ZXpfVXJ0oERy8bFPLgEyhBh2soRFQ6f-xguFowpjJ8e_IJRWQT7flQw-Y70mU9sJxLjHNIO6E3277aQ=w600-h600-n"
          style="width: 150px; border-radius: 10px;" alt="ê¹€ë¯¼ì£¼">
        <div style="margin-top: 0.5rem;">ê¹€ë¯¼ì£¼</div>
      </a>
      <a href="/Designer/view/425319" style="flex: 0 0 auto; text-align: center; color: #fff;">
        <img
          src="https://lh3.googleusercontent.com/ZO-XHWjvHVXA8p7BzjcFhp0Vvl87HaVYZHUtbJ32RwT-9Ke9ARsFQjsU3Eqyt7bCsTCXpkn_S5eU1bdEztzH28KjpjrGpWIAScrJw0DDch3W2skYpVWoqA=w600-h600-n"
          style="width: 150px; border-radius: 10px;" alt="ê¹€ì‚¬ë‘">
        <div style="margin-top: 0.5rem;">ê¹€ì‚¬ë‘</div>
      </a>
      <a href="./view.html?id=425318" style="flex: 0 0 auto; text-align: center; color: #fff;">
        <img
          src="https://lh3.googleusercontent.com/jd2kbQm64AV99SMioTUUl4xyuSBdZ4Qin6czG4B-FiiS5LSi0B01OTJW0tt4gH371-8vobFhT9OgZPCqvyoC_zZUM6HHlg9qPRvcy-uVPnwzjv8dynC0FA=w600-h600-n"
          style="width: 150px; border-radius: 10px;" alt="ê¹€ì€ì„œ">
        <div style="margin-top: 0.5rem;">ê¹€ì€ì„œ</div>
      </a>
    </div>
  </div>

  <script src="../script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const id = params.get('id');
      const year = sessionStorage.getItem("selectedYear") || "2023";

      const getImgUrl = window.getImgUrl;
      const getUserAssetUrl = (name, type, filename) => {
        const base = "https://firebasestorage.googleapis.com/v0/b/jvisiondesign-web.firebasestorage.app/o/";
        const fullPath = type
          ? `2023/UsersWorkData/${name}/${type}/${filename}`
          : `2023/UsersWorkData/${name}/${filename}`;  // flat path if type is empty
        return `${base}${encodeURIComponent(fullPath)}?alt=media`;
      };
      const TeamAssetUrl = (projectname,thumnail) => {
        const base = "https://firebasestorage.googleapis.com/v0/b/jvisiondesign-web.firebasestorage.app/o/";
        const fullPath = `2023/TeamWorkData/${projectname}/${thumnail}`;
        return `${base}${encodeURIComponent(fullPath)}?alt=media`;
      };

      fetch(`/data/${year}.json`)
        .then(res => res.json())
        .then(data => {
          const designer = data.ë””ìì´ë„ˆ.find(d => d.name === id);
          console.log(designer)

          if (designer) {
            const profileImgEl = document.getElementById("profileImg");
            if (profileImgEl) {
              const profileImgUrl = getImgUrl(designer.name);
              console.log("profileImgUrl:", profileImgUrl);
              profileImgEl.src = profileImgUrl;
              profileImgEl.alt = `${designer.name}_í”„ë¡œí•„`;
            }

            document.title = designer.name;
            document.getElementById("designerName").textContent = designer.name;

            if (designer.posterThumb) {
              const poster = document.createElement("img");
              const posterName = document.createElement("div");
              poster.src = getUserAssetUrl(designer.name, "PosterSorce", designer.posterThumb);
              poster.alt = `${designer.name}_í¬ìŠ¤í„°`;
              posterName.innerHTML = `<strong style="font-size:20px">${designer.posterName}</strong><br/><p style="font-size:14px; color:#e5e5e5">í¬ìŠ¤í„°</p>`;
              document.querySelector(".detail-project-img").appendChild(poster);
              document.querySelector(".detail-project-img").appendChild(posterName);
            }

            if (designer.videoFile) {
              const video = document.createElement("img");
              const vidioName = document.createElement("div");
              video.src = getUserAssetUrl(designer.name, "VideoSorce", designer.videoFile);
              video.controls = true;
              vidioName.innerHTML = `<strong style="font-size:20px">${designer.vidioName}</strong><br/><p style="font-size:14px; color:#e5e5e5">ë¹„ë””ì˜¤</p>`;
              document.querySelector(".detail-project-vidio").appendChild(video);
              document.querySelector(".detail-project-vidio").appendChild(vidioName);
            }
            if (designer.teamProjectThum) {
              const tproject = document.createElement("img");
              const tprojectName = document.createElement("div");
              tproject.src = TeamAssetUrl(designer.teamWork, designer.teamProjectThum);
              tproject.controls = true;
              tprojectName.innerHTML = `<strong style="font-size:20px">${designer.teamWorkEng}</strong><br/><p style="font-size:14px; color:#e5e5e5">íŒ€ í”„ë¡œì íŠ¸</p>`;
              document.querySelector(".detail-project-tproject").appendChild(tproject);
              document.querySelector(".detail-project-tproject").appendChild(tprojectName);
            }

            // Render specific labeled content from .txt file if profileText exists
            // JSON ì•ˆì— ê°’ì´ ìˆë‹¤ë©´ ë°”ë¡œ DOMì— ì¶œë ¥
              const comment = designer.profileComment || "";
              const email = designer.profileEmail || "";
              const hope = designer.profileDream || "";
              console.log("comment:", comment);
              document.querySelector(".designer-quote").innerHTML = `<strong>${comment}</stong>`;
              document.querySelector(".profile-info").innerHTML = `${hope}<br>${email}`;
          } else {
            document.querySelector(".detail-container").innerHTML = "<p>ë””ìì´ë„ˆ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>";
          }

          function getComments() {
            const saved = localStorage.getItem(`comments_${id}`);
            return saved ? JSON.parse(saved) : [];
          }

          function addComment() {
            const input = document.getElementById('commentInput');
            const comment = input.value.trim();
            if (!comment) return;

            const comments = getComments();
            comments.push(comment);
            localStorage.setItem(`comments_${id}`, JSON.stringify(comments));
            input.value = '';
            renderComments();
          }

          function renderComments() {
            // Implement comment rendering
          }

          renderComments();
        });
    });
  </script>
</body>

</html>